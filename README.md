뉴렉처 스프링 aop 4강 내용입니다. 주제는 어노테이션 11강에서도 말했지만 혹시 히스토리를 통해 제 과거 스프링 공부를 보신다면
README.AD는 RAW로 봐주시기 바랍니다. 과거에는 지금처럼 태그를 보이게 해놓지않아서 안보일겁니다.
읽기전에! 제가 이해하기위해 작성한 글이므로 반말 존댓말이 섞일수 있으며 맞춤법이 잘 맞지 않을수 있으므로 양해 부탁드립니다. 그럼 설명ㄱ!
그리고 좀 지저분해서 그전 주석내용들 몇개는 지웠어요 보실거라면 히스토리 보시면됩니다!!!

---------------------------------------------------------------------------------------------------------
오늘은 이러한 aop를 스프링으로 구현할겁니다. 스프링은 aop를 할수있게 도와주는데요. 순수 자바 aop랑 비슷하게 proxy를 쓴다. 그리고 개발자
로직을 구현하는 경우는 다양한데 저번시간에 한것처럼 앞뒤로 할수도있고 앞으로 뒤로 각각할수도 있다. 스프링은 이런점을 각각 다음과 같이 나누었다. 앞에만 있는 before 뒤에만 필요한 after running 예외를 처리하는 after Throwing 앞뒤로 다필요한 around 이 4가지로
개발자의 로직 종류를 나누어 다룬다. 
프로젝트에 들어가면서 먼저 spring.di패키지에 있는 xml을 복사해서 spring.aop에 놓고 di에 있는 program클래스에서 Context코드를
xml과 어노테이션 둘다 사용하므로 가져온다.
여기서는 xml버전만 다룰것이다.
이제 이번 코드를 설명을 하겠습니다.
먼저 setting.xml xml로 스프링을 다룰것이기에 추가된것이 많은데요.
먼저 id 가 target인 빈을 하나 추가하였습니다. 그전에 만들었던 SongExam클래스와 같습니다.
그다음 id가 exam인 빈은 프록시를 구현한건데요. 프록시를 빈으로 구현할것이기에 클래스는 ProxyFactoryBean으로 하였습니다. class가 좀 길어서 찾기가 힘들겁니다.
그러시면 외우지말고 자바파일에서 입력하시면서 패키지 정보를 찾을수 있습니다.
exam 빈의 프로퍼티로 name="target"이 있는데 target을 등록함으로써 그전에 순수 자바에서 등록했던 클래스와 인터페이스를 찾던것을 생략할수 있습니다. ref는 그전에 만들었던 target을 넣어주면 되겠조^^
이제 핸들러를 등록해야되는데요 핸들러는 여러개가 올수있습니다. 그래서 exam빈의 프로퍼티로
interceptorNames를 추가하고 list로 값을 넣어줍니다. value로 logAroundAdvice로 넣어주었는데요 그전에 순수자바에서는 익명으로 만들어주었지만 이것은 xml이기에 직접만들어 줘야합니다.
그래서 위 logAroundAdvice로 빈클래스를 새로 만든것을 볼수있습니다.
아 ref타입이니까 value가 아니지 않나하는 의문이 들수 있는데 list는 자체가 참조이기에 value로 해야 맞습니다.
다음 LogAroundAdvice에 대해서 설명하겠습니다. 위에서 언급한데로 핸들러를 구현하기 위해 만든 클래스입니다. 
핸들러를 구현하기 위해 먼저 MethodInterceptor과같은 인터페이스를 상속해야 합니다.
상속을 하고나면 추가해야하는 메서드가 생기는데요 저번강의에서 봐서 눈에익은 함수 
invoke입니다. invoke를 오버라이드해서 저번 프록시 클래스에서 추가한 invoke와 비슷한 형식으로
작성해야 합니다. 바뀐점이라면 중간에 사용할 SongExam의 메서드를 다른 값으로 받아오는데요. 순수자바에선 그게 method라면 여기서는 invocation입니다. invocation의 proceed()로 순수자바의 method.invoke(exam, args);과 같은 효과를 볼수있습니다.
마지막으로 Program 파일을 보겠습니다. 그전에 사용했떤 순수자바코드는 주석을 해주었고
몇없는 코드가 있는것을 볼수있습니다. 다 xml로 설정해주었기에 별로안남게됬죠 유후~
setting.xml로 context를 초기화해주고 id가 exam인 프록시를 초기화해주어 출력한다는 뜻입니다.
만약 여기서 프록시를 사용하지 않을거라면 xml파일에서 주석처리하거나 지우면 되겠죠? 오늘은 여기까지


